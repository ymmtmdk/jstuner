{"version":3,"sources":["webpack:///webpack/bootstrap 84c246708d0677084356","webpack:///./src/main.ts","webpack:///webpack:///webpack/universalModuleDefinition","webpack:///webpack:/webpack/bootstrap 31c66d41f93c78f41d28","webpack:///webpack:///src/index.ts","webpack:///webpack:///webpack:/webpack/universalModuleDefinition","webpack:///webpack:/webpack:/webpack/bootstrap 2a645848f60d00a95eee","webpack:///webpack:///webpack:/src/complex.ts","webpack:///webpack:///webpack:/src/fft.ts","webpack:///webpack:///webpack:/src/index.ts","webpack:///webpack:///webpack:/src/pitcher.ts","webpack:///webpack:///webpack:/src/note.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 84c246708d0677084356","import { JsTunerUI, Recorder } from 'jstuner-ui';\n\nwindow.onload = () => {\n  const ui = new JsTunerUI(document.getElementById(\"tuner\"));\n  const recorder = new Recorder();\n  recorder.onData = (wave, hz, note)=>{\n    ui.draw(wave, hz, note);\n  }\n  recorder.main();\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"bundle\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"bundle\"] = factory();\n\telse\n\t\troot[\"bundle\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition\n\n\n// WEBPACK FOOTER //\n// webpack:///webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 31c66d41f93c78f41d28\n\n\n// WEBPACK FOOTER //\n// webpack:/webpack/bootstrap 31c66d41f93c78f41d28","import { Note, Pitcher } from 'pitch-detector';\n\nexport class JsTunerUI{\n  private readonly canvas;\n  private readonly canvasContext;\n  private readonly hzElement;\n  private readonly noteElement;\n\n  constructor(element){\n    this.canvas = document.createElement(\"canvas\");\n    this.hzElement = document.createElement(\"div\");\n    this.noteElement = document.createElement(\"div\");\n    element.appendChild(this.canvas);\n    element.appendChild(this.hzElement);\n    element.appendChild(this.noteElement);\n    this.canvasContext = this.canvas.getContext(\"2d\");\n  }\n\n  setPixel(imageData, x: number, y: number, color) {\n    const width = imageData.width;\n    const data = imageData.data;\n    const index = ((width * y) + x) * 4;\n    if (!isNaN(color.r)) {\n      data[index] = color.r;\n    }\n    if (!isNaN(color.g)) {\n      data[index + 1] = color.g;\n    }\n    if (!isNaN(color.b)) {\n      data[index + 2] = color.b;\n    }\n    if (!isNaN(color.a)) {\n      return data[index + 3] = color.a;\n    }\n  }\n\n  drawWave(buffer, note: Note) {\n    let x, y;\n    this.canvasContext.save();\n    this.canvasContext.fillStyle = \"rgb(30, 30, 30)\";\n    this.canvasContext.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    this.canvasContext.restore();\n    const imageData = this.canvasContext.getImageData(0, 0, this.canvas.width, this.canvas.height);\n    const color = {\n      r: 200,\n      g: 200,\n      b: 200,\n      a: 255\n    };\n    const red = {\n      r: 200,\n      g: 0,\n      b: 0,\n      a: 255\n    };\n\n    const width = imageData.width;\n    const height = imageData.height;\n    for (let x = 0; x < width; x++){\n      y = Math.floor(height/2+buffer[x*2]*height)\n      this.setPixel(imageData, x, y, color);\n    }\n\n    x = Math.round(width/2 + width * note.diff())\n    for (let y = 0; y < height; y++){\n      this.setPixel(imageData, x, y, color);\n      this.setPixel(imageData, width/2, y, red);\n    }\n    this.canvasContext.putImageData(imageData, 0, 0);\n  };\n\n  draw(wave, hz){\n    const note = new Note(hz);\n    if (wave){\n      this.drawWave(wave, note);\n    }\n    this.hzElement.innerHTML = 'hz = ' + hz;\n    this.noteElement.innerHTML = 'note = ' + (hz<30 ? \"\" : note.name());\n  }\n}\n\nexport class Recorder{\n  private readonly audioContext;\n  onData;\n\n  constructor(){\n    this.audioContext = new AudioContext();\n  }\n\n  connectRecorder(stream) {\n    const bufferSize = 2048;\n    const recorder = this.audioContext.createScriptProcessor(bufferSize, 2, 2);\n    let counter = 0;\n    recorder.onaudioprocess = (e)=> {\n      const span = document.hasFocus() ? 2 : 16;\n      if (counter++ % span != 0) {\n        return;\n      }\n      const left = e.inputBuffer.getChannelData(0);\n      const hz = Pitcher.pitch(left, this.audioContext.sampleRate);\n      if (this.onData){\n        this.onData(left, hz);\n      }\n    };\n    const input = this.audioContext.createMediaStreamSource(stream);\n    input.connect(recorder);\n    return recorder.connect(this.audioContext.destination);\n  };\n\n  main(){\n    const nav: any = navigator;\n    const win: any = window;\n\n    if (!nav.getUserMedia) {\n      nav.getUserMedia = nav.getUserMedia || nav.webkitGetUserMedia || nav.mozGetUserMedia || nav.msGetUserMedia;\n    }\n    if (!win.AudioContext) {\n      win.AudioContext = win.webkitAudioContext;\n    }\n    if (!nav.getUserMedia || !win.AudioContext) {\n      alert(\"not supported in this browser.\");\n      return;\n    }\n\n    nav.getUserMedia(\n      { audio: true },\n      this.connectRecorder.bind(this), () => alert(\"error capturing audio.\")\n    );\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts\n\n\n// WEBPACK FOOTER //\n// webpack:///src/index.ts","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"bundle\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"bundle\"] = factory();\n\telse\n\t\troot[\"bundle\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition\n\n\n// WEBPACK FOOTER //\n// webpack:///webpack/universalModuleDefinition\n\n\n// WEBPACK FOOTER //\n// webpack:///webpack:/webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2a645848f60d00a95eee\n\n\n// WEBPACK FOOTER //\n// webpack:/webpack/bootstrap 2a645848f60d00a95eee\n\n\n// WEBPACK FOOTER //\n// webpack:/webpack:/webpack/bootstrap 2a645848f60d00a95eee","export class Complex{\n  real: number;\n  imag: number;\n\n  constructor(r:number, i:number){\n    this.real = r;\n    this.imag = i;\n  }\n\n  multi_f(f:number):Complex{\n    return new Complex(this.real*f, this.imag*f);\n  }\n\n  multi_f_bang(f:number):Complex{\n    this.real *= f;\n    this.imag *= f;\n    return this;\n  }\n\n  multi(c:Complex):Complex{\n    return new Complex(this.real*c.real-this.imag*c.imag, this.real*c.imag+this.imag*c.real);\n  }\n\n  multi_bang(c:Complex):Complex{\n    this.real = this.real*c.real-this.imag*c.imag;\n    this.imag = this.real*c.imag+this.imag*c.real;\n    return this;\n  }\n\n  minus(c:Complex):Complex{\n    return new Complex(this.real-c.real, this.imag-c.imag);\n  }\n\n  minus_bang(c:Complex):Complex{\n    this.real-=c.real;\n    this.imag-=c.imag;\n    return this;\n  }\n\n  plus(c:Complex):Complex{\n    return new Complex(this.real+c.real, this.imag+c.imag);\n  }\n\n  plus_bang(c:Complex):Complex{\n    this.real+=c.real;\n    this.imag+=c.imag;\n    return this;\n  }\n\n  exp():Complex{\n    var expreal = Math.exp(this.real);\n    return new Complex(expreal * Math.cos(this.imag), expreal * Math.sin(this.imag));\n  }\n\n  exp_bang():Complex{\n    var expreal = Math.exp(this.real);\n    this.real = expreal * Math.cos(this.imag);\n    this.imag = expreal * Math.sin(this.imag);\n    return this;\n  }\n\n  abs2():Complex{\n    return new Complex(this.real*this.real + this.imag*this.imag, 0);\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/complex.ts\n\n\n// WEBPACK FOOTER //\n// webpack:///src/complex.ts\n\n\n// WEBPACK FOOTER //\n// webpack:///webpack:/src/complex.ts","import { Complex } from './complex';\n\nexport class FFT{\n  private static fft_inner(n: number,stride: number,copy_flag: boolean,x: Array<Complex>,y: Array<Complex>) {\n    if(n <= 1) {\n      for (let q = 0; copy_flag && q < stride; q++){ y[q] = x[q]; }\n      return;\n    }\n\n    const m = Math.floor(n/2);\n    const theta = 2.0 * Math.PI / n;\n    for (let p = 0; p < m; p++){\n      const wp = new Complex(Math.cos(p * theta),-Math.sin(p * theta));\n      for (let q = 0; q < stride; q++){\n        const a = x[q + stride * p];\n        const b = x[q + stride * (p + m)];\n        y[q + stride * (2*p+0)] = a.plus(b);\n        y[q + stride * (2*p+1)] = a.minus_bang(b).multi(wp);\n      }\n    }\n    FFT.fft_inner(m, 2*stride, !copy_flag, y, x);\n  }\n\n  static fft(x: Array<Complex>, n: number) {\n    FFT.fft_inner(n, 1, false, x, new Array<Complex>());\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/fft.ts\n\n\n// WEBPACK FOOTER //\n// webpack:///src/fft.ts\n\n\n// WEBPACK FOOTER //\n// webpack:///webpack:/src/fft.ts","import { Complex } from './complex';\nimport { FFT } from './fft';\nimport { Pitcher } from './pitcher';\nimport { Note } from './note';\n\nexport { Complex, FFT, Pitcher, Note };\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts\n\n\n// WEBPACK FOOTER //\n// webpack:///src/index.ts\n\n\n// WEBPACK FOOTER //\n// webpack:///webpack:/src/index.ts","import { Complex } from './complex';\nimport { FFT } from './fft';\n\nexport class Pitcher{\n  private static parabola(nsdf: Array<number>, i:number){\n    const a = nsdf[i-1];\n    const b = nsdf[i];\n    const c = nsdf[i+1];\n\n    const bottom = a + c - 2.0 * b;\n    let x:number, y:number;\n    if (bottom === 0.0){\n      x = i;\n      y = b;\n    }else{\n      const delta = a - c;\n      x = i + delta / (2.0 * bottom);\n      y = b - delta * delta / (8.0 * bottom);\n    }\n    return {x:x, y:y};\n  }\n\n  private static acf(x: Array<Complex>){\n    const n = x.length;\n    const tmp = new Array<Complex>();\n    for (let i = 0; i < n; i++){tmp[i] = x[i];}\n    for (let i = n; i < (n*2); i++){tmp[i] = new Complex(0,0);}\n\n    FFT.fft(tmp, n*2);\n    for (let i = 0; i < (n*2); i++){tmp[i] = tmp[i].abs2();}\n\n    FFT.fft(tmp, n*2);\n    const out = new Array<number>();\n    for (let i = 0; i < n; i++){out[i] = tmp[i].real/n/2;}\n    return out;\n  }\n\n  private static nsdf(x: Array<Complex>){\n    const n = x.length;\n    const out = this.acf(x);\n    let tsq = out[0]*2.0;\n    for (let i = 0; i < n; i++){\n      out[i] = tsq>0.0 ? out[i]/tsq : 0.0;\n      tsq -= Math.pow(x[n-1-i].real, 2) + Math.pow(x[i].real, 2);\n    }\n    return out;\n  }\n\n  private static peakPicking(nsdf: Array<number>){\n    let head = 0;\n    const peakIndexes = new Array<number>();\n    const n = nsdf.length - 1;\n    let i = 0;\n    for (; i < n && nsdf[i] > 0; i++){\n      // nop\n    }\n    for (; i < n; i++){\n      const pi = peakIndexes[head];\n      if (nsdf[i] > 0){\n        if (pi === undefined || nsdf[i] > nsdf[pi]){\n          peakIndexes[head] = i;\n        }\n      }else if (pi !== undefined){\n        head += 1;\n      }\n    }\n\n    return peakIndexes;\n  }\n\n  static pitch(ary: Array<number>, sampleRate: number){\n    const DEFAULT_CUTOFF = 0.95;\n\n    const x = new Array<Complex>();\n    for (let i = 0; i < ary.length; i++) x[i] = new Complex(ary[i], 0);\n\n    const nsdf = this.nsdf(x);\n\n    const peakIndexes = this.peakPicking(nsdf);\n    if (peakIndexes.length === 0) return -1.0;\n\n    const periods = new Array<number>();\n    const amps = new Array<number>();\n\n    let maxAmp = 0;\n    for (let i = 0; i < peakIndexes.length; i++){\n      const h = this.parabola(nsdf, peakIndexes[i]);\n      maxAmp = Math.max(maxAmp, h.y);\n      amps.push(h.y);\n      periods.push(h.x);\n    }\n\n    if (maxAmp < 0.35) return -1.0;\n\n    let idx = amps.findIndex(e=> e > DEFAULT_CUTOFF * maxAmp);\n    if (idx === -1) return -1.0;\n\n    return sampleRate / periods[idx];\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pitcher.ts\n\n\n// WEBPACK FOOTER //\n// webpack:///src/pitcher.ts\n\n\n// WEBPACK FOOTER //\n// webpack:///webpack:/src/pitcher.ts","export class Note{\n  readonly hz: number;\n  readonly base: number;\n  readonly note: number;\n  constructor(hz: number) {\n    this.hz = hz;\n    this.base = 55;\n    this.note = Math.log(this.hz / this.base) / Math.log(2) * 12;\n  }\n\n  name(): string {\n    const names = [\"A\",\"A#\",\"B\",\"C\",\"C#\",\"D\",\"D#\",\"E\",\"F\",\"F#\",\"G\",\"G#\"];\n    const note12 = (this.note >= 0) ? this.note % 12 : this.note % 12 + 12;\n    var i = Math.floor((note12 + 0.5) % 12);\n    return names[i];\n  }\n\n  diff(): number {\n    return (this.note + 0.5) % 1 - 0.5;\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/note.ts\n\n\n// WEBPACK FOOTER //\n// webpack:///src/note.ts\n\n\n// WEBPACK FOOTER //\n// webpack:///webpack:/src/note.ts"],"sourceRoot":""}